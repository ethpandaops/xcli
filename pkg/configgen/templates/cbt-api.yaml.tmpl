{{- define "cbt-api-config" -}}
server:
  port: {{ .Port }}
  metrics_port: {{ .MetricsPort }}
  host: 0.0.0.0
  read_header_timeout: 10s
  read_timeout: 30s
  write_timeout: 30s
  idle_timeout: 120s

clickhouse:
  dsn: "clickhouse://default:supersecret@localhost:9000"
  database: "{{ .Network }}"
  use_final: false
  max_open_conns: 10
  max_idle_conns: 5
  conn_max_lifetime: 60s
  dial_timeout: 10s
  read_timeout: 30s
  write_timeout: 30s
  max_execution_time: 60
  insecure_skip_verify: false
  discovery:
    prefixes:
      - fct
      - int
      - dim
    exclude:
      - "*_test"
      - "*_tmp"

proto:
  output_dir: "./pkg/proto/clickhouse"
  package: "cbt.v1"
  go_package: "github.com/ethpandaops/cbt-api/pkg/proto/clickhouse"
  include_comments: true

api:
  base_path: "/api/v1"
  # Only tables with these prefixes will be exposed via REST API
  expose_prefixes:
    - fct
    - dim
    - int
  # Exclude tables matching these patterns from API exposure
  exclude:
    - "*_local"

telemetry:
  enabled: false
{{- end -}}
