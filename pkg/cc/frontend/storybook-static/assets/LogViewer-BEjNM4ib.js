import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./iframe-CIsN2Fyl.js";const g={ERROR:"text-error",WARN:"text-warning",WARNING:"text-warning",INFO:"text-info",DEBUG:"text-text-muted"},j=["ALL","ERROR","WARN","INFO","DEBUG"];function b({logs:a,selectedService:l}){const[c,m]=r.useState("ALL"),[i,d]=r.useState(""),[n,u]=r.useState(!0),s=r.useRef(null),o=a.filter(t=>!(l&&t.Service!==l||c!=="ALL"&&t.Level!==c||i&&!t.Message.toLowerCase().includes(i.toLowerCase())));r.useEffect(()=>{n&&s.current&&(s.current.scrollTop=s.current.scrollHeight)},[o.length,n]);const h=r.useCallback(()=>{if(!s.current)return;const{scrollTop:t,scrollHeight:x,clientHeight:p}=s.current,f=x-t-p<40;u(f)},[]);return e.jsxs("div",{className:"flex h-full flex-col overflow-hidden rounded-sm border border-border bg-surface",children:[e.jsxs("div",{className:"flex items-center gap-3 border-b border-border px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"size-3.5 text-text-disabled",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),e.jsx("span",{className:"text-xs/4 font-medium text-text-secondary",children:l??"All services"})]}),e.jsx("div",{className:"mx-1 h-4 w-px bg-border"}),e.jsx("div",{className:"flex items-center gap-0.5",children:j.map(t=>e.jsx("button",{onClick:()=>m(t),className:`rounded-xs px-1.5 py-0.5 text-xs/4 font-medium transition-colors ${c===t?t==="ERROR"?"bg-error/15 text-error":t==="WARN"?"bg-warning/15 text-warning":"bg-accent/15 text-accent-light":"text-text-disabled hover:text-text-tertiary"}`,children:t},t))}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 rounded-xs bg-surface-light px-2 py-1",children:[e.jsx("svg",{className:"size-3 text-text-disabled",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),e.jsx("input",{type:"text",placeholder:"Filter...",value:i,onChange:t=>d(t.target.value),className:"w-28 bg-transparent text-xs/4 text-text-secondary placeholder:text-text-disabled focus:outline-hidden"}),i&&e.jsx("button",{onClick:()=>d(""),className:"text-text-disabled hover:text-text-tertiary",children:e.jsx("svg",{className:"size-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),e.jsxs("button",{onClick:()=>u(!n),className:`flex items-center gap-1 rounded-xs px-2 py-1 text-xs/4 font-medium transition-colors ${n?"bg-success/15 text-success":"text-text-disabled hover:text-text-tertiary"}`,children:[e.jsx("svg",{className:"size-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"})}),"Follow"]})]})]}),e.jsx("div",{ref:s,onScroll:h,className:"flex-1 overflow-auto p-2 font-mono text-xs/5",children:o.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-3",children:[e.jsx("svg",{className:"size-8 text-border",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),e.jsx("span",{className:"text-xs/4 text-border",children:l?"No logs matching filters":"Waiting for logs..."})]}):o.slice(-5e3).map((t,x)=>e.jsx("div",{className:`break-all whitespace-pre-wrap ${g[t.Level]??"text-text-tertiary"}`,children:t.Message},x))}),e.jsxs("div",{className:"flex items-center justify-between border-t border-border px-3 py-1 text-xs/4 text-border",children:[e.jsxs("span",{children:[o.length," lines",o.length!==a.length&&e.jsxs("span",{className:"text-border",children:[" / ",a.length," total"]})]}),n&&e.jsxs("span",{className:"flex items-center gap-1 text-success/60",children:[e.jsx("span",{className:"size-1 animate-pulse rounded-full bg-success"}),"auto-scrolling"]})]})]})}b.__docgenInfo={description:"",methods:[],displayName:"LogViewer",props:{logs:{required:!0,tsType:{name:"Array",elements:[{name:"LogLine"}],raw:"LogLine[]"},description:""},selectedService:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""}}};export{b as L};
