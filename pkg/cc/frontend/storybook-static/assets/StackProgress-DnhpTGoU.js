import{j as e}from"./jsx-runtime-D_zvdyIk.js";const m=[{id:"prerequisites",label:"Validate Prerequisites"},{id:"build_xatu_cbt",label:"Build Xatu-CBT"},{id:"infrastructure",label:"Start Infrastructure"},{id:"build_services",label:"Build Services"},{id:"network_setup",label:"Network Setup"},{id:"generate_configs",label:"Generate Configurations"},{id:"build_cbt_api",label:"Build CBT API"},{id:"start_services",label:"Start Services"}],p=[{id:"stop_services",label:"Stop Services"},{id:"cleanup_orphans",label:"Clean Up Processes"},{id:"clean_logs",label:"Clean Log Files"},{id:"stop_infrastructure",label:"Stop Infrastructure"}];function b(r,a,i=m){if(r.length===0)return i.map(s=>({...s,status:"pending"}));const l=r[r.length-1],d=new Set(r.map(s=>s.phase)),n=new Map(r.map(s=>[s.phase,s.message]));if(l.phase==="complete")return i.map(s=>({...s,status:"done",message:n.get(s.id)}));const o=i.findIndex(s=>s.id===l.phase);return i.map((s,c)=>{const t=d.has(s.id);return a&&s.id===l.phase?{...s,status:"error",message:a}:c<o||t&&c!==o?{...s,status:"done",message:n.get(s.id)}:c===o?{...s,status:"active",message:n.get(s.id)}:{...s,status:"pending"}})}function g({phases:r,error:a,title:i="Booting Stack",onRetry:l,onCancel:d}){const n=r.filter(t=>t.status==="done").length,o=r.find(t=>t.status==="active"),s=r.some(t=>t.status==="error"),c=s?n/r.length*100:o?(n+.5)/r.length*100:n/r.length*100;return e.jsxs("div",{className:"flex h-full items-center justify-center",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:e.jsx("div",{className:`absolute top-1/2 left-1/2 size-[600px] -translate-x-1/2 -translate-y-1/2 rounded-full opacity-[0.07] blur-[120px] ${s?"bg-error":o?"bg-success":"bg-accent"}`})}),e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsxs("div",{className:"flex items-baseline justify-between",children:[e.jsx("h2",{className:"text-xs/4 font-semibold tracking-widest text-text-muted uppercase",children:i}),e.jsxs("span",{className:"font-mono text-xs/4 text-text-disabled",children:[n,"/",r.length]})]}),e.jsx("div",{className:"mt-3 h-px w-full bg-border",children:e.jsx("div",{className:`h-full transition-all duration-700 ease-out ${s?"bg-error":"bg-success"}`,style:{width:`${c}%`}})}),e.jsx("div",{className:"mt-6",children:r.map((t,u)=>{const x=String(u+1).padStart(2,"0");return e.jsxs("div",{className:"relative flex items-start gap-3 pb-5 last:pb-0",children:[u<r.length-1&&e.jsx("div",{className:`absolute top-5 left-[11px] h-full w-px transition-colors duration-300 ${t.status==="done"?"bg-success/30":"bg-border"}`}),e.jsxs("div",{className:"relative z-10 flex size-[22px] shrink-0 items-center justify-center",children:[t.status==="done"&&e.jsx("span",{className:"flex size-[22px] items-center justify-center rounded-full bg-success/15",children:e.jsx("svg",{className:"size-3 text-success",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})}),t.status==="active"&&e.jsxs("span",{className:"relative flex size-[22px] items-center justify-center",children:[e.jsx("span",{className:"absolute size-[22px] animate-ping rounded-full bg-warning/20"}),e.jsx("span",{className:"absolute size-[22px] rounded-full bg-warning/10"}),e.jsx("span",{className:"relative size-2 rounded-full bg-warning shadow-[0_0_10px_var(--color-warning)]"})]}),t.status==="error"&&e.jsx("span",{className:"flex size-[22px] items-center justify-center rounded-full bg-error/15",children:e.jsx("svg",{className:"size-3 text-error",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),t.status==="pending"&&e.jsx("span",{className:"flex size-[22px] items-center justify-center",children:e.jsx("span",{className:"size-1.5 rounded-full bg-border"})})]}),e.jsxs("div",{className:"min-w-0 flex-1 pt-0.5",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:`font-mono text-xs/4 ${t.status==="done"?"text-success/50":t.status==="active"?"text-warning/60":t.status==="error"?"text-error/60":"text-border"}`,children:x}),e.jsx("span",{className:`text-sm/5 font-medium ${t.status==="done"?"text-success/80":t.status==="active"?"text-text-primary":t.status==="error"?"text-error":"text-text-disabled"}`,children:t.label})]}),t.status==="active"&&t.message&&e.jsx("p",{className:"mt-1 truncate font-mono text-xs/4 text-warning/50",children:t.message}),t.status==="error"&&a&&e.jsx("p",{className:"mt-1 truncate font-mono text-xs/4 text-error/60",children:a})]})]},t.id)})}),a&&l&&e.jsx("button",{onClick:l,className:"mt-6 rounded-xs bg-success/10 px-4 py-2 text-xs/4 font-medium text-success ring-1 ring-success/20 transition-colors hover:bg-success/20",children:"Retry"}),!a&&d&&e.jsx("button",{onClick:d,className:"mt-5 text-xs/4 text-text-disabled transition-colors hover:text-error",children:"Cancel Boot"})]})]})}g.__docgenInfo={description:"",methods:[],displayName:"StackProgress",props:{phases:{required:!0,tsType:{name:"Array",elements:[{name:"PhaseState"}],raw:"PhaseState[]"},description:""},error:{required:!0,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Booting Stack'",computed:!1}},onRetry:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{m as B,g as S,p as a,b as d};
